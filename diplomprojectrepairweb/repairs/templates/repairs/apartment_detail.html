{% extends "repairs/base.html" %}


{% block content %}
<h2>{{ apartment.name }}</h2>
<p>Адрес: {{ apartment.address }}</p>
<p>Площадь: {{ apartment.total_area }} м²</p>
<a href="{% url 'room_create' apartment.id %}">Добавить комнату</a>
<h3>Комнаты:</h3>
<ul>
    {% for room in rooms %}
    <li>{{ room.name }} — (Площадь: {{ room.area }} м²)
        <a href="{% url 'work_create' room.id %}">Добавить работу</a></li>
    <h5 class="mt-3">Работы</h5>
    <table class="table">
        <thead>
        <tr>
            <th>Название</th>
            <th>Описание</th>
            <th>Стоимость</th>
            <th>Дата</th>
        </tr>
        </thead>
        <tbody>
        {% for work in room.work_set.all %}
        <tr>
            <td>{{ work.name }}</td>
            <td>{{ work.description|default:"—" }}</td>
            <td>{{ work.cost }}</td>
            <td>{{ work.date }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">Нет работ</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    </li>
    {% empty %}
    <li class="list-group-item">Нет комнат</li>
    {% endfor %}
</ul>
<a href="{% url 'apartment' %}" class="btn btn-secondary mt-3">Назад</a>
</div>
{% endblock %}
